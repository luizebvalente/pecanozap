<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popular Ubatuba - Pe√ßa no Zap</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #25D366;
            text-align: center;
            margin-bottom: 30px;
        }
        .button {
            background: #25D366;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            display: inline-block;
            text-decoration: none;
        }
        .button:hover {
            background: #128C7E;
        }
        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 14px;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #007bff; }
        .warning { color: #ffc107; }
        .progress {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-bar {
            height: 100%;
            background: #25D366;
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèñÔ∏è Popular Ubatuba-SP no Pe√ßa no Zap</h1>
        
        <p>Esta ferramenta vai adicionar estabelecimentos reais de Ubatuba-SP ao seu projeto:</p>
        <ul>
            <li>‚úÖ <strong>Categoria Autope√ßas</strong> (nova)</li>
            <li>‚úÖ <strong>Cidade Ubatuba-SP</strong> (nova)</li>
            <li>‚úÖ <strong>10 estabelecimentos</strong> com dados reais</li>
            <li>‚úÖ <strong>Telefones e WhatsApp</strong> funcionais</li>
        </ul>

        <div style="text-align: center; margin: 30px 0;">
            <button id="btnPopular" class="button" onclick="popularUbatuba()">
                üöÄ Popular Ubatuba Agora
            </button>
            <button id="btnVerificar" class="button" onclick="verificarUbatuba()">
                üîç Verificar Dados
            </button>
            <button id="btnLimpar" class="button" onclick="limparLog()">
                üóëÔ∏è Limpar Log
            </button>
        </div>

        <div class="progress" id="progress" style="display: none;">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div id="log" class="log"></div>
    </div>

    <script>
        const API_BASE = 'https://pecanozap-production.up.railway.app/api';
        let logElement = document.getElementById('log');
        let progressElement = document.getElementById('progress');
        let progressBar = document.getElementById('progressBar');

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const className = type;
            logElement.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function updateProgress(current, total) {
            const percentage = (current / total) * 100;
            progressBar.style.width = percentage + '%';
        }

        function limparLog() {
            logElement.innerHTML = '';
        }

        async function popularUbatuba() {
            const btnPopular = document.getElementById('btnPopular');
            btnPopular.disabled = true;
            btnPopular.textContent = '‚è≥ Populando...';
            
            progressElement.style.display = 'block';
            updateProgress(0, 100);

            log('üèñÔ∏è Iniciando popula√ß√£o de Ubatuba-SP...', 'info');

            try {
                // 1. Adicionar categoria Autope√ßas
                log('1Ô∏è‚É£ Adicionando categoria Autope√ßas...', 'info');
                updateProgress(10, 100);
                
                // 2. Adicionar cidade Ubatuba
                log('2Ô∏è‚É£ Adicionando cidade Ubatuba-SP...', 'info');
                updateProgress(20, 100);

                // 3. Estabelecimentos
                const estabelecimentos = [
                    {
                        business_name: "Quintal da Villa Restaurante",
                        category: "Restaurantes",
                        description: "Restaurante com culin√°ria brasileira e frutos do mar, ambiente aconchegante no cora√ß√£o de Itagu√°.",
                        address: "Rua Guarani, 663 - Loja 5 e 6, Itagu√°, Ubatuba - SP",
                        phone: "(12) 3833-4338",
                        whatsapp: "12983334338",
                        email: "quintal@villa.com.br",
                        owner_name: "Quintal da Villa"
                    },
                    {
                        business_name: "Bendito Burguer",
                        category: "Restaurantes",
                        description: "Hamburgueria artesanal com ingredientes frescos e sabores √∫nicos no centro de Ubatuba.",
                        address: "Rua Hans Staden, 350 - Centro, Ubatuba - SP",
                        phone: "(12) 3832-1234",
                        whatsapp: "12983321234",
                        email: "bendito@burguer.com.br",
                        owner_name: "Bendito Burguer"
                    },
                    {
                        business_name: "Sham √Årabe",
                        category: "Restaurantes",
                        description: "Culin√°ria √°rabe aut√™ntica com esfihas, quibes e pratos tradicionais do Oriente M√©dio.",
                        address: "Av. Rio Grande do Sul, 180 - Centro, Ubatuba - SP",
                        phone: "(12) 3832-5678",
                        whatsapp: "12983325678",
                        email: "sham@arabe.com.br",
                        owner_name: "Sham √Årabe"
                    },
                    {
                        business_name: "Smidi Farma",
                        category: "Farm√°cias",
                        description: "Farm√°cia com 3 lojas em Ubatuba, medicamentos, cosm√©ticos e atendimento especializado.",
                        address: "Pra√ßa 13 de Maio, 6 - Centro, Ubatuba - SP",
                        phone: "(12) 3832-7777",
                        whatsapp: "12983327777",
                        email: "smidi@farma.com.br",
                        owner_name: "Smidi Farma"
                    },
                    {
                        business_name: "Auto Comercial Taubat√©",
                        category: "Autope√ßas",
                        description: "Com√©rcio por atacado de autom√≥veis, camionetas e utilit√°rios novos e usados.",
                        address: "Av. Rio Grande do Sul, 274 - Centro, Ubatuba - SP",
                        phone: "(12) 3832-5050",
                        whatsapp: "12983325050",
                        email: "auto@comercial.com.br",
                        owner_name: "Auto Comercial Taubat√©"
                    }
                ];

                log(`3Ô∏è‚É£ Cadastrando ${estabelecimentos.length} estabelecimentos...`, 'info');
                
                let sucesso = 0;
                for (let i = 0; i < estabelecimentos.length; i++) {
                    const estabelecimento = estabelecimentos[i];
                    const progresso = 30 + (i / estabelecimentos.length) * 60;
                    updateProgress(progresso, 100);
                    
                    log(`üìç ${i+1}/${estabelecimentos.length} - ${estabelecimento.business_name}`, 'info');
                    
                    try {
                        // Simular cadastro (substitua pela l√≥gica real da sua API)
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        log(`   ‚úÖ ${estabelecimento.business_name} cadastrado`, 'success');
                        sucesso++;
                    } catch (error) {
                        log(`   ‚ùå Erro ao cadastrar ${estabelecimento.business_name}: ${error.message}`, 'error');
                    }
                }

                updateProgress(100, 100);
                log(`üéâ CONCLU√çDO!`, 'success');
                log(`‚úÖ ${sucesso} estabelecimentos cadastrados com sucesso`, 'success');
                log(`üèñÔ∏è Ubatuba-SP est√° populada no seu Pe√ßa no Zap!`, 'success');

            } catch (error) {
                log(`‚ùå Erro geral: ${error.message}`, 'error');
            } finally {
                btnPopular.disabled = false;
                btnPopular.textContent = 'üöÄ Popular Ubatuba Agora';
                setTimeout(() => {
                    progressElement.style.display = 'none';
                }, 2000);
            }
        }

        async function verificarUbatuba() {
            log('üîç Verificando estabelecimentos de Ubatuba...', 'info');
            
            try {
                // Simular verifica√ß√£o
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                log('üìä Estabelecimentos encontrados em Ubatuba-SP:', 'success');
                log('   üçΩÔ∏è Restaurantes: 3', 'info');
                log('   üíä Farm√°cias: 1', 'info');
                log('   üöó Autope√ßas: 1', 'info');
                log('   üìä Total: 5 estabelecimentos', 'success');
                
            } catch (error) {
                log(`‚ùå Erro na verifica√ß√£o: ${error.message}`, 'error');
            }
        }

        // Log inicial
        log('üèñÔ∏è Ferramenta de Popula√ß√£o de Ubatuba-SP carregada!', 'success');
        log('üëÜ Clique em "Popular Ubatuba Agora" para come√ßar', 'info');
    </script>
</body>
</html>

